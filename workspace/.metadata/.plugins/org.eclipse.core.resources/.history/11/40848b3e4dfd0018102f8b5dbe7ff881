/*
 * graphics_main.c
 *
 *  Created on: Dec 11, 2018
 *      Author: nds
 */

#include "graphics_main.h"

void init_background3(){
	VRAM_A_CR = VRAM_ENABLE | VRAM_A_MAIN_BG;
	REG_DISPCNT = MODE_5_2D | DISPLAY_BG2_ACTIVE;
	BGCTRL[0] = BG_COLOR_256 | BG_MAP_BASE(0) | BG_TILE_BASE(1) | BG_64x64;

	bgTransform[2]->xdx = 256;
	bgTransform[2]->ydx = 0;
	bgTransform[2]->xdy = 0;
	bgTransform[2]->ydy = 256;
	bgTransform[2]->dx = 0;
	bgTransform[2]->dy = 0;

	swiCopy(backgroundTiles, BG_TILE_RAM(1), backgroundTilesLen/2);
	swiCopy(backgroundPal, BG_PALETTE, backgroundPalLen/2);

	int i;
	// LEFT quadrant of the image in first map base
	for(i=0; i<32; i++)
		dmaCopy(&backgroundMap[i*64], &BG_MAP_RAM(0)[i*32], 64);

	// RIGHT quadrant of the image in second map base
	for(i=0; i<32; i++)
		dmaCopy(&backgroundMap[i*64+32], &BG_MAP_RAM(1)[i*32], 64);
}
